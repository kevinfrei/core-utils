{"version":3,"sources":["../src/SeqNum.js"],"names":["makeSeqNumGenerator","prefix","resume","pref","pl","length","curId","parseInt","substr","theFunc","toString","keyCompare","a","b","aPref","bPref","NaN","aVal","bVal","module","exports"],"mappings":"AACA;AAEA;AACA;AACA;AACA;AAIA,SAASA,mBAAT,CACEC,MADF,EAEEC,MAFF,EAGmB;AACjB,QAAMC,IAAI,GAAGF,MAAM,IAAI,EAAvB;AACA,QAAMG,EAAE,GAAGD,IAAI,CAACE,MAAhB;AACA,MAAIC,KAAK,GAAG,CAAZ;;AACA,MAAIJ,MAAJ,EAAY;AACVI,IAAAA,KAAK,GAAGC,QAAQ,CAACL,MAAM,CAACM,MAAP,CAAcJ,EAAd,CAAD,EAAoB,EAApB,CAAhB;AACAE,IAAAA,KAAK;AACN;;AACD,QAAMG,OAAO,GAAG,MAAMN,IAAI,GAAG,CAACG,KAAK,EAAN,EAAUI,QAAV,CAAmB,EAAnB,CAA7B;;AACAD,EAAAA,OAAO,CAACE,UAAR,GAAqB,CAACC,CAAD,EAAYC,CAAZ,KAAkC;AACrD,UAAMC,KAAK,GAAGF,CAAC,CAACJ,MAAF,CAAS,CAAT,EAAYJ,EAAZ,CAAd;AACA,UAAMW,KAAK,GAAGF,CAAC,CAACL,MAAF,CAAS,CAAT,EAAYJ,EAAZ,CAAd;;AACA,QAAIU,KAAK,KAAKC,KAAd,EAAqB;AACnB,aAAOC,GAAP;AACD;;AACD,UAAMC,IAAI,GAAGV,QAAQ,CAACK,CAAC,CAACJ,MAAF,CAASJ,EAAT,CAAD,EAAe,EAAf,CAArB;AACA,UAAMc,IAAI,GAAGX,QAAQ,CAACM,CAAC,CAACL,MAAF,CAASJ,EAAT,CAAD,EAAe,EAAf,CAArB;AACA,WAAOa,IAAI,GAAGC,IAAd;AACD,GATD;;AAUA,SAAOT,OAAP;AACD;;AAEDU,MAAM,CAACC,OAAP,GAAiBpB,mBAAjB","sourcesContent":["// @flow\n// @format\n\n// usage:\n// const generator = require('SeqNum')('prefix');\n// newSeqNum = generator();\n// anotherSeqNum = generator();\n\nimport type { SeqNumGenerator } from './index';\n\nfunction makeSeqNumGenerator(\n  prefix: ?string,\n  resume: ?string\n): SeqNumGenerator {\n  const pref = prefix || '';\n  const pl = pref.length;\n  let curId = 0;\n  if (resume) {\n    curId = parseInt(resume.substr(pl), 36);\n    curId++;\n  }\n  const theFunc = () => pref + (curId++).toString(36);\n  theFunc.keyCompare = (a: string, b: string): number => {\n    const aPref = a.substr(0, pl);\n    const bPref = b.substr(0, pl);\n    if (aPref !== bPref) {\n      return NaN;\n    }\n    const aVal = parseInt(a.substr(pl), 36);\n    const bVal = parseInt(b.substr(pl), 36);\n    return aVal - bVal;\n  };\n  return theFunc;\n}\n\nmodule.exports = makeSeqNumGenerator;\n"],"file":"SeqNum.js"}